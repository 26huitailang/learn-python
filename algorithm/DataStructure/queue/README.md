# Queue

## 概念

- 队列和栈一样，是操作受限的线性表数据结构
- 额外特性：循环队列、阻塞队列、并发队列

## 顺序队列和链式队列

## 循环队列

- 满时，有一个存储空间是没有数据的，tail会指向这个空间
- 队列空的判断条件与之前相同，tail == head
- 队列满的判断条件不同，(tail + 1) % n == head，这个取余的操作保证了（比如长度n是5）tail是4，head是0时，依然满足条件，其实不是这种极端情况的话 +1就可以

## 阻塞队列和并发队列

- 阻塞队列，取的时候如果队列为空则阻塞，等待队列有数据可取才返回，插入时如果满了也阻塞，等到有空闲位置时再插入并返回
- 经典的有生产消费者模型
- 如果有多个生产者或消费者，且线程安全的队列叫做并发队列
  - 最简单的实现是在入队和出队的方法上加锁

## 队列在线程池等有限资源池中的应用

当没有足够的线程资源的时候，将新的请求进行排队，FIFO。

链式队列可以实现无边界队列，但是如果请求排队过多的话，导致响应时间过长，对响应时间敏感的系统不合适。

基于数组实现的有界队列，队列大小有限，超过排队大小的请求会被拒绝

实际上，对于大部分资源有限的场景，当没有空闲资源时，基本上都可以通过队列这种数据结构来实现请求排队
